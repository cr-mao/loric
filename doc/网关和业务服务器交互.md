## 网关和业务服务器交互

- 网关和业务服务器采用grpc通信, 作为客户端带有grpc简易连接池，实现代码和[grpc-conn-pool](https://github.com/cr-mao/grpc-conn-pool)几乎一致，其实单连接由于是多路复用，无损理论上已经可以打到几万qps。
- 路由分有状态和无状态，无状态路由，随意打到某台服务器，有状态路由必须打到绑定到业务服务器 （用户在哪台服务器见[用户定位器](用户定位器.md))
- 无状态或者第一次绑定node 采用权重轮训或指定node。权重轮训是为了，控制请求，甚至完全后续不打到某台服务器去，给权重0即可。










