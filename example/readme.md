# 一个联盟聊天室的案例

**进入联盟后，同一个联盟的用户可以互相聊天，用户所在的机器代表是状态的，必须gate打到同一台node去**（算是绑定node后的一个场景需求）

注册，获得token，获得网关地址都在http协议上进行 作为前提

用户长链后第一个包就是所谓的auth包（我这边也叫做登录)

只做内存数据映射，不同的token就是对应一个user_id,内存自增累加。


## 网关服

gate目录

## auth服 （登录服)

auth目录

用户进行auth包发送后，自动加入联盟(userid%2)(绑定联盟id), 联盟id和node节点有个映射关系(目前是手动映射),然后绑定node机器，同一个联盟的人会在同一台节点上进行聊天


## 联盟聊天服

limeng_chat,limeng_chat1 2台服务器

